from loader import db

I18N_CACHE = {
    'uz': {
        'welcome': "Assalomu alaykum {username}!",
        'choose_language': "Iltimos tilni tanlang:",
        'login_required': "â— Siz tizimga kirmagansiz",
        'main_menu': "Asosiy menyu:",
        'login_confirm': "âš ï¸ Tasdiqlang: bu sizning login ma'lumotlaringizmi?\n\n{username}:{password}",
        'login_success': "âœ… Tizimga kirdingiz!",
        'login_fail': "âŒ Username yoki password xato!",
        'login_ask': "Iltimos username va password yuboring, shunday koâ€˜rinishda:\nusername:password",
        'format_error': "âŒ Format xato. username:password shaklida yuboring",
        'cancelled': "âŒ Bekor qilindi",
        'account_not_logged': "â— Siz tizimga kirmagansiz",
        'account_session_expired': "ğŸ” Sessiya tugagan. Qayta login qiling.",
        'account_info': "ğŸ‘¤ Account ma'lumotlari:\n\nUsername: {username}\nğŸ’° Balance: {balance}",
        'logout_success': "ğŸšª Siz tizimdan chiqdingiz.\n\nQayta kirish uchun Login yoki Register tanlang.",
        'login_btn': "ğŸ” Login",
        'register_btn': "ğŸ“ Roâ€˜yxatdan oâ€˜tish",
        'account_btn': "ğŸ§˜â€â™‚ï¸ Hisob",
        'booking_btn': "ğŸ® Band qilish",
        'history_btn': "ğŸ“„ Tarix",
        'web_site_btn': "ğŸšª Sayt",
        'yes_btn': "âœ… Ha",
        'no_btn': "âŒ Yoâ€˜q",
        'logout_btn': "ğŸ”´ Chiqish",
        'back_btn': "ğŸ”™ Orqaga",
        'username_prompt': "ğŸ‘¤ Username yuboring:",
        'password_prompt': "ğŸ” Password kiriting:",
        'password_repeat_prompt': "ğŸ” Passwordni qayta kiriting:",
        'password_mismatch': "âŒ Passwordlar mos emas. Qayta urinib koâ€˜ring.",
        'confirm_registration': "âš ï¸ Tasdiqlang:\n\nUsername: {username}",
        'username_taken': "âŒ Username band yoki maâ€™lumot xato!",
        'registered_success': "âœ… Roâ€˜yxatdan oâ€˜tdingiz va tizimga kirdingiz!",
        'token_error': "âŒ Token olishda xato!",
        'rooms_btn': "ğŸ›‹ Xonalar",
        'devices_btn': "ğŸ–¥ Qurilmalar",
        'book_btn': "ğŸ® Band qilish",
        'rooms_title': "ğŸ›‹ Xonalar",
        'devices_title': "ğŸ–¥ Qurilmalar",
        'device_status_free': "âœ… Boâ€˜sh",
        'device_status_busy': "âŒ Band",
        'device_status_pending': "Kutib turibdi active bolishini",
        'zone_back_btn': "ğŸ”™ Zonelarga qaytish",
        'no_room_btn': 'Xonalari yoq',
        'active_cfrm_btn':"âœ… keldi",
        'missed_cfrm_btn':"âŒ kelmadi",
        "booking_enter_time": "â° Boshlash vaqtini yuboring.\n\nFormat: HH:MM\nMasalan: 18:30",
        "booking_time_format_error": "âŒ Vaqt formati xato.\n\nToâ€˜gâ€˜ri format: HH:MM\nMasalan: 18:30",
        "booking_time_past_error": "âŒ Bu vaqt allaqachon oâ€˜tib ketgan.\n\nHozirgi vaqt: {now}",
        "booking_choose_hours": "âŒ› Necha soat oâ€˜ynaysiz?\n\nQuyidan tanlang:",
        'booking_time_format_error':"âŒ Vaqt formati notoâ€˜gâ€˜ri.\nHH:MM koâ€˜rinishida kiriting.",
        'booking_confirm_title':"ğŸ“‹ Booking maâ€™lumotlari:\n\nğŸ•’ Boshlanish: {start}\nâ± Davomiyligi: {hours} soat\n\nTasdiqlaysizmi?",
        "booking_error":"âŒ Booking amalga oshmadi.\nIltimos, qayta urinib koâ€˜ring."

    },
    'ru': {
        'welcome': "ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ {username}!",
        'choose_language': "ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ·Ñ‹Ğº:",
        'login_required': "â— Ğ’Ñ‹ Ğ½Ğµ Ğ²Ğ¾ÑˆĞ»Ğ¸ Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ",
        'main_menu': "Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ:",
        'login_confirm': "âš ï¸ ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğµ: ÑÑ‚Ğ¾ Ğ²Ğ°ÑˆĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ğ²Ñ…Ğ¾Ğ´Ğ°?\n\n{username}:{password}",
        'login_success': "âœ… Ğ’Ñ‹ Ğ²Ğ¾ÑˆĞ»Ğ¸ Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ!",
        'login_fail': "âŒ ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ username Ğ¸Ğ»Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ!",
        'login_ask': "ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ username Ğ¸ password Ğ² Ñ‚Ğ°ĞºĞ¾Ğ¼ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ:\nusername:password",
        'format_error': "âŒ ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚. username:password",
        'cancelled': "âŒ ĞÑ‚Ğ¼ĞµĞ½ĞµĞ½Ğ¾",
        'account_not_logged': "â— Ğ’Ñ‹ Ğ½Ğµ Ğ²Ğ¾ÑˆĞ»Ğ¸ Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ",
        'account_session_expired': "ğŸ” Ğ¡ĞµÑÑĞ¸Ñ Ğ¸ÑÑ‚ĞµĞºĞ»Ğ°. ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ¾Ğ¹Ğ´Ğ¸Ñ‚Ğµ ÑĞ½Ğ¾Ğ²Ğ°.",
        'account_info': "ğŸ‘¤ Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°:\n\nUsername: {username}\nğŸ’° Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ: {balance}",
        'logout_success': "Ğ’Ñ‹ Ğ²Ñ‹ÑˆĞ»Ğ¸ Ğ¸Ğ· ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹.\n\nĞ”Ğ»Ñ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ñ…Ğ¾Ğ´Ğ° Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Login Ğ¸Ğ»Ğ¸ Register.",
        'login_btn': "ğŸ” Ğ’Ğ¾Ğ¹Ñ‚Ğ¸",
        'register_btn': "ğŸ“ Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ",
        'account_btn': "ğŸ§˜â€â™‚ï¸ ĞĞºĞºĞ°ÑƒĞ½Ñ‚",
        'booking_btn': "ğŸ® Ğ‘Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ",
        'history_btn': "ğŸ“„ Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ",
        'web_site_btn': "ğŸšª Ğ’ĞµĞ±ÑĞ°Ğ¹Ñ‚",
        'yes_btn': "âœ… Ğ”Ğ°",
        'no_btn': "âŒ ĞĞµÑ‚",
        'logout_btn': "ğŸ”´ Ğ²Ñ‹Ğ¹Ñ‚Ğ¸",
        'back_btn': "ğŸ”™ ĞĞ°Ğ·Ğ°Ğ´",
        'username_prompt': "ğŸ‘¤ Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ username:",
        'password_prompt': "ğŸ” Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ:",
        'password_repeat_prompt': "ğŸ” ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ:",
        'password_mismatch': "âŒ ĞŸĞ°Ñ€Ğ¾Ğ»Ğ¸ Ğ½Ğµ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´Ğ°ÑÑ‚. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ÑĞ½Ğ¾Ğ²Ğ°.",
        'confirm_registration': "âš ï¸ ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğµ:\n\nUsername: {username}",
        'username_taken': "âŒ Username Ğ·Ğ°Ğ½ÑÑ‚ Ğ¸Ğ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ½ĞµĞ²ĞµÑ€Ğ½Ñ‹!",
        'registered_success': "âœ… Ğ’Ñ‹ Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ»Ğ¸ÑÑŒ Ğ¸ Ğ²Ğ¾ÑˆĞ»Ğ¸ Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ!",
        'token_error': "âŒ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğ¸ Ñ‚Ğ¾ĞºĞµĞ½Ğ°!",
        'rooms_btn': "ğŸ›‹ ĞšĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹",
        'devices_btn': "ğŸ–¥ Ğ£ÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°",
        'book_btn': "ğŸ® Ğ—Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ",
        'rooms_title': "ğŸ›‹ ĞšĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹",
        'devices_title': "ğŸ–¥ Ğ£ÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°",
        'device_status_free': "âœ… Ğ¡Ğ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ğ¾",
        'device_status_busy': "âŒ Ğ—Ğ°Ğ½ÑÑ‚Ğ¾",
        'device_status_pending': "ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°",
        'zone_back_btn': "ğŸ”™ ĞĞ°Ğ·Ğ°Ğ´ Ğº Ğ·Ğ¾Ğ½Ğ°Ğ¼",
        'no_room_btn': "ĞĞµÑ‚ ĞšĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹",
        'active_cfrm_btn':"âœ… Ğ¿Ñ€Ğ¸ÑˆĞ¾Ğ»ÑŒ",
        'missed_cfrm_btn':"âŒ Ğ½Ğµ Ğ¿Ñ€Ğ¸ÑˆĞ¾Ğ»ÑŒ",
        "booking_enter_time": "â° ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ Ğ²Ñ€ĞµĞ¼Ñ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°.\n\nĞ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚: HH:MM\nĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: 18:30",
        "booking_time_format_error": "âŒ ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸.\n\nĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚: HH:MM\nĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: 18:30",
        "booking_time_past_error": "âŒ Ğ­Ñ‚Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¾.\n\nĞ¢ĞµĞºÑƒÑ‰ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ: {now}",
        "booking_choose_hours": "âŒ› Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ‡Ğ°ÑĞ¾Ğ² Ğ±ÑƒĞ´ĞµÑ‚Ğµ Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ?\n\nĞ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ½Ğ¸Ğ¶Ğµ:",
        'booking_time_format_error':"âŒ ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸.\nĞ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ HH:MM.",
        'booking_confirm_title':'ğŸ“‹ Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:\n\nğŸ•’ ĞĞ°Ñ‡Ğ°Ğ»Ğ¾: {start}\nâ± Ğ”Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ: {hours} Ñ‡Ğ°ÑĞ¾Ğ²\n\nĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ?',
        "booking_error":"âŒ ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ.\nĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ĞµÑ‰Ñ‘ Ñ€Ğ°Ğ·."
    },
    'en': {
        'welcome': "Hello {username}!",
        'choose_language': "Please select your language:",
        'login_required': "â— You are not logged in",
        'main_menu': "Main menu:",
        'login_confirm': "âš ï¸ Confirm: are these your login credentials?\n\n{username}:{password}",
        'login_success': "âœ… You are logged in!",
        'login_fail': "âŒ Wrong username or password!",
        'login_ask': "Please send username and password in this format:\nusername:password",
        'format_error': "âŒ Wrong format. username:password",
        'cancelled': "âŒ Cancelled",
        'account_not_logged': "â— You are not logged in",
        'account_session_expired': "ğŸ” Session expired. Please login again.",
        'account_info': "ğŸ‘¤ Account info:\n\nUsername: {username}\nğŸ’° Balance: {balance}",
        'logout_success': "ğŸšª You have logged out.\n\nSelect Login or Register to log in again.",
        'login_btn': "ğŸ” Login",
        'register_btn': "ğŸ“ Register",
        'account_btn': "ğŸ§˜â€â™‚ï¸ Account",
        'booking_btn': "ğŸ® Booking",
        'history_btn': "ğŸ“„ History",
        'web_site_btn': "ğŸšª Web Site",
        'yes_btn': "âœ… Yes",
        'no_btn': "âŒ No",
        'logout_btn': "ğŸ”´ logout",
        'back_btn': "ğŸ”™ Back",
        'username_prompt': "ğŸ‘¤ Send your username:",
        'password_prompt': "ğŸ” Enter password:",
        'password_repeat_prompt': "ğŸ” Repeat password:",
        'password_mismatch': "âŒ Passwords do not match. Try again.",
        'confirm_registration': "âš ï¸ Confirm:\n\nUsername: {username}",
        'username_taken': "âŒ Username taken or invalid data!",
        'registered_success': "âœ… You have registered and logged in!",
        'token_error': "âŒ Error while getting token!",
        'rooms_btn': "ğŸ›‹ Rooms",
        'devices_btn': "ğŸ–¥ Devices",
        'book_btn': "ğŸ® Book",
        'rooms_title': "ğŸ›‹ Rooms",
        'devices_title': "ğŸ–¥ Devices",
        'device_status_free': "âœ… Available",
        'device_status_busy': "âŒ Busy",
        'device_status_pending': "It's waiting for",
        'zone_back_btn': "ğŸ”™ Back to zones",
        'no_room_btn': "there is not rooms",
        'active_cfrm_btn':"âœ… Active",
        'missed_cfrm_btn':"âŒ missed",
        "booking_enter_time": "â° Send the start time.\n\nFormat: HH:MM\nExample: 18:30",
        "booking_time_format_error": "âŒ Invalid time format.\n\nCorrect format: HH:MM\nExample: 18:30",
        "booking_time_past_error": "âŒ This time has already passed.\n\nCurrent time: {now}",
        "booking_choose_hours": "âŒ› How many hours will you play?\n\nChoose below:",
        "booking_time_format_error":"âŒ Invalid time format. \nUse HH:MM format.",
        'booking_confirm_title':"ğŸ“‹ Booking details:\n\nğŸ•’ Start: {start}]\nâ± Duration: {hours} hours\n\nConfirm?",
        'booking_error': "âŒ Booking failed.\nPlease try again."
    }
}



async def t(telegram_id: int, key: str, **kwargs):
    lang = await db.get_language(telegram_id=telegram_id)
    if not lang:
        lang = 'uz'

    text = I18N_CACHE.get(lang, I18N_CACHE['uz']).get(key, key)
    return text.format(**kwargs)